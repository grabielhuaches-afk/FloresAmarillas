<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Flores Amarillas Estilo Mejorado - Girasoles</title>
<style>
  html, body {
    margin: 0; padding: 0; height: 100%;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(to top, #2c1a0f 0%, #a24d2f 60%, #87CEEB 100%);
    overflow: hidden;
    color: #333;
  }
  body {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  .container {
    position: relative;
    width: 90vw;
    max-width: 900px;
    height: 80vh;
    background: linear-gradient(to top, #1b5e20 0%, #4caf50 60%, #81c784 100%);
    border-radius: 12px;
    box-shadow: 0 0 20px rgba(0,0,0,0.3);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  header {
    text-align: center;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.9);
    border-bottom: 2px solid #fbc02d;
    width: 100%;
    box-sizing: border-box;
  }
  header h1 {
    margin: 0;
    font-weight: 700;
    font-size: 2rem;
    color: #fbc02d;
    text-shadow: 1px 1px 2px #555;
  }
  #nombreFinal {
    margin-top: 0.5rem;
    font-size: 1.5rem;
    font-weight: 600;
    color: #2e7d32;
    text-shadow: 1px 1px 1px #a5d6a7;
  }
  #extraMessage {
    margin-top: 0.3rem;
    font-size: 1.2rem;
    font-weight: 600;
    color: #b71c1c;
    text-shadow: 1px 1px 1px #f8bbd0;
  }
  .flowers {
    position: relative;
    width: 100%;
    height: calc(100% - 150px);
    display: flex;
    justify-content: center;
    align-items: flex-end;
  }
  svg.flower {
    position: absolute;
    bottom: 0;
    width: 120px;
    height: 180px;
    cursor: pointer;
    transition: transform 0.3s ease;
    opacity: 0;
    animation: fadeInPop 1s forwards;
  }
  svg.flower:hover {
    transform: scale(1.15) translateY(-15px);
    filter: drop-shadow(0 6px 8px rgba(0,0,0,0.4));
    z-index: 10;
  }
  @keyframes sway {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-8px) rotate(3deg); }
  }
  svg.flower.sway {
    animation: sway 6s ease-in-out infinite;
    transform-origin: 50% 100%;
  }
  @keyframes fadeInPop {
    0% { opacity: 0; transform: scale(0.8) translateY(0); }
    100% { opacity: 1; transform: scale(1) translateY(0); }
  }
  @keyframes petalMove {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-3px) rotate(2deg); }
  }
  /* Formulario */
  #nameForm {
    margin: 1rem 0;
    text-align: center;
    z-index: 10;
  }
  #nameForm input[type="text"] {
    font-size: 1.2rem;
    padding: 8px 12px;
    border-radius: 6px;
    border: 2px solid #4caf50;
    width: 220px;
    max-width: 90vw;
    transition: border-color 0.3s, box-shadow 0.3s;
  }
  #nameForm input[type="text"]:focus {
    outline: none;
    border-color: #fbc02d;
    box-shadow: 0 0 6px #fbc02d;
  }
  #nameForm button {
    font-size: 1.2rem;
    padding: 8px 16px;
    border-radius: 6px;
    border: none;
    background-color: #fbc02d;
    color: #333;
    font-weight: 700;
    margin-left: 10px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  #nameForm button:disabled {
    background-color: #ddd;
    cursor: not-allowed;
  }
  #nameForm button:hover:not(:disabled) {
    background-color: #f9a825;
  }
  /* Fondo animado: sol y nubes */
  .sun {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 60px;
    height: 60px;
    background: #ffeb3b;
    border-radius: 50%;
    box-shadow: 0 0 20px #ff9800, 0 0 40px #ff9800;
    animation: pulse 4s infinite alternate;
    z-index: 1;
  }
  @keyframes pulse {
    0% { transform: scale(1); }
    100% { transform: scale(1.1); }
  }
  .cloud {
    position: absolute;
    background: white;
    border-radius: 50%;
    opacity: 0.8;
    filter: drop-shadow(0 2px 3px rgba(0,0,0,0.1));
    z-index: 1;
  }
  .cloud1 {
    top: 30px;
    left: 50px;
    width: 40px;
    height: 40px;
    animation: moveCloud 25s linear infinite;
  }
  .cloud2 {
    top: 60px;
    left: 120px;
    width: 60px;
    height: 60px;
    animation: moveCloud 30s linear infinite;
  }
  .cloud3 {
    top: 40px;
    right: 100px;
    width: 50px;
    height: 50px;
    animation: moveCloud 35s linear infinite reverse;
  }
  @keyframes moveCloud {
    0% { transform: translateX(-20px); }
    100% { transform: translateX(calc(100vw + 100px)); }
  }
  /* Tooltip */
  .tooltip {
    position: absolute;
    background: rgba(0,0,0,0.75);
    color: #fff;
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 0.9rem;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s;
    white-space: nowrap;
    z-index: 20;
  }
  /* Responsive */
  @media (max-width: 768px) {
    header h1 {
      font-size: 1.7rem;
    }
    #nombreFinal {
      font-size: 1.3rem;
    }
    #extraMessage {
      font-size: 1.1rem;
    }
    svg.flower {
      width: 90px;
      height: 135px;
    }
  }
</style>
</head>
<body>
<div class="container" role="main" aria-label="Página de flores amarillas">
  <div class="sun" aria-hidden="true"></div>
  <div class="cloud cloud1" aria-hidden="true"></div>
  <div class="cloud cloud2" aria-hidden="true"></div>
  <div class="cloud cloud3" aria-hidden="true"></div>

  <header>
    <h1 id="mainTitle">¿Pero qué pasó, no te dieron tus flores amarillas?</h1>
    <div id="nombreFinal" aria-live="polite"></div>
    <div id="extraMessage" aria-live="polite"></div>
  </header>

  <form id="nameForm" aria-label="Formulario para ingresar nombre">
    <input type="text" id="nombreInput" placeholder="Escribe tu nombre aquí" aria-label="Nombre" required autocomplete="off" />
    <button type="submit" disabled>Recibir flores</button>
  </form>

  <div class="flowers" id="flowers" aria-label="Flores amarillas"></div>

  <div class="tooltip" id="tooltip" role="tooltip" aria-hidden="true"></div>
</div>

<script>
  const flowersDiv = document.getElementById('flowers');
  const nombreFinal = document.getElementById('nombreFinal');
  const nameForm = document.getElementById('nameForm');
  const nombreInput = document.getElementById('nombreInput');
  const mainTitle = document.getElementById('mainTitle');
  const extraMessage = document.getElementById('extraMessage');
  const submitBtn = nameForm.querySelector('button');
  const tooltip = document.getElementById('tooltip');

  // Habilitar botón solo si hay texto
  nombreInput.addEventListener('input', () => {
    submitBtn.disabled = nombreInput.value.trim() === '';
  });

  // Datos para tooltip y mensajes personalizados
  const flowerMessages = [
    "¡Eres un sol radiante!",
    "Tu alegría ilumina el día",
    "Flores para alguien especial",
    "Que tu día sea tan brillante como este girasol",
    "Sigue floreciendo con fuerza",
    "Tu sonrisa es contagiosa",
    "Eres luz y energía positiva",
    "Un regalo para alegrar tu día"
  ];

  // Crear flor minimalista con animaciones y variaciones
  function createMinimalSunflower(xPercent, delay, index) {
    const svgns = "http://www.w3.org/2000/svg";
    const svg = document.createElementNS(svgns, "svg");
    svg.setAttribute("class", "flower sway");
    svg.setAttribute("viewBox", "0 0 120 180");
    svg.style.left = xPercent + "%";
    svg.style.animationDelay = delay + "s";
    svg.style.opacity = 0;
    svg.style.animation = fadeInPop 1s forwards;
    svg.style.animationDelay = delay + "s";

    // Variar tamaño
    const scale = 0.8 + Math.random() * 0.4;
    svg.style.transformOrigin = "50% 100%";
    svg.style.transform = scale(${scale});

    // Tronco
    const trunk = document.createElementNS(svgns, "rect");
    trunk.setAttribute("x", "57");
    trunk.setAttribute("y", "100");
    trunk.setAttribute("width", "6");
    trunk.setAttribute("height", "80");
    trunk.setAttribute("fill", "#2e7d32");
    svg.appendChild(trunk);

    // Centro
    const center = document.createElementNS(svgns, "circle");
    center.setAttribute("cx", "60");
    center.setAttribute("cy", "60");
    center.setAttribute("r", "20");
    center.setAttribute("fill", "#6d4c41");
    svg.appendChild(center);

    // Pétalos con animación y color variable
    const petalCount = 16;
    for(let i=0; i<petalCount; i++) {
      const angle = (360 / petalCount) * i;
      const petal = document.createElementNS(svgns, "ellipse");
      petal.setAttribute("cx", "60");
      petal.setAttribute("cy", "30");
      petal.setAttribute("rx", "10");
      petal.setAttribute("ry", "25");
      // Color amarillo con variación
      const yellowShade = 200 + Math.floor(Math.random() * 55);
      petal.setAttribute("fill", rgb(255, ${yellowShade}, 0));
      petal.setAttribute("stroke", "#b8860b");
      petal.setAttribute("stroke-width", "1");
      petal.setAttribute("transform", rotate(${angle} 60 60));
      // Animación de pétalo (sutil movimiento)
      petal.style.animation = petalMove ${4 + Math.random()*3}s ease-in-out infinite;
      petal.style.animationDelay = ${Math.random()*4}s;
      svg.appendChild(petal);
    }

    // Interactividad: tooltip y click
    svg.setAttribute("tabindex", "0");
    svg.setAttribute("role", "button");
    svg.setAttribute("aria-label", Flor amarilla: ${flowerMessages[index % flowerMessages.length]});

    svg.addEventListener('mouseenter', e => {
      showTooltip(e, flowerMessages[index % flowerMessages.length]);
    });
    svg.addEventListener('focus', e => {
      showTooltip(e, flowerMessages[index % flowerMessages.length]);
    });
    svg.addEventListener('mouseleave', hideTooltip);
    svg.addEventListener('blur', hideTooltip);

    svg.addEventListener('click', () => {
      alert(¡Gracias por hacer florecer esta flor! 🌻\nMensaje: ${flowerMessages[index % flowerMessages.length]});
    });

    return svg;
  }

  // Mostrar tooltip cerca del cursor o elemento
  function showTooltip(event, text) {
    tooltip.textContent = text;
    tooltip.style.opacity = '1';
    tooltip.setAttribute('aria-hidden', 'false');
    const rect = event.target.getBoundingClientRect();
    const containerRect = flowersDiv.getBoundingClientRect();
    // Posicionar tooltip arriba centrado respecto a la flor
    const top = rect.top - containerRect.top - 30;
    const left = rect.left - containerRect.left + rect.width / 2;
    tooltip.style.top = ${top}px;
    tooltip.style.left = ${left}px;
  }
  function hideTooltip() {
    tooltip.style.opacity = '0';
    tooltip.setAttribute('aria-hidden', 'true');
  }

  function generateFlowers() {
    flowersDiv.innerHTML = '';
    for(let i=0; i<8; i++) {
      const x = 10 + i * 10 + (Math.random() * 5);
      const delay = Math.random() * 6;
      const flower = createMinimalSunflower(x, delay, i);
      flowersDiv.appendChild(flower);
    }
  }

  // Sonido ambiental suave (opcional)
  let audio;
  function setupAudio() {
    audio = new Audio('https://cdn.pixabay.com/download/audio/2022/03/15/audio_0a7a7a3a3a.mp3?filename=calm-nature-sounds-ambient-forest-10807.mp3');
    audio.loop = true;
    audio.volume = 0.15;
  }
  function toggleAudio() {
    if (!audio) setupAudio();
    if (audio.paused) {
      audio.play();
      audioBtn.textContent = "🔈 Silenciar sonido";
    } else {
      audio.pause();
      audioBtn.textContent = "🔊 Sonido ambiental";
    }
  }

  // Inicialización
  nameForm.addEventListener('submit', e => {
    e.preventDefault();
    const nombre = nombreInput.value.trim();
    if (!nombre) {
      alert("Por favor, escribe tu nombre.");
      nombreInput.focus();
      return;
    }
    mainTitle.textContent = "¡Feliz día de las flores amarillas!";
    nombreFinal.textContent = nombre;
    extraMessage.textContent = "No seas espectadora (llorona)";
    generateFlowers();
    nameForm.style.display = 'none';
    audioBtn.style.display = 'inline-block';
  });

  // Botón para sonido ambiental
  const audioBtn = document.createElement('button');
  audioBtn.textContent = "🔊 Sonido ambiental";
  audioBtn.style.margin = "10px";
  audioBtn.style.fontSize = "1rem";
  audioBtn.style.padding = "6px 12px";
  audioBtn.style.borderRadius = "6px";
  audioBtn.style.border = "none";
  audioBtn.style.backgroundColor = "#fbc02d";
  audioBtn.style.color = "#333";
  audioBtn.style.fontWeight = "700";
  audioBtn.style.cursor = "pointer";
  audioBtn.style.transition = "background-color 0.3s ease";
  audioBtn.style.display = "none";
  audioBtn.addEventListener('click', toggleAudio);
  document.querySelector('.container').appendChild(audioBtn);
  audioBtn.addEventListener('mouseenter', () => audioBtn.style.backgroundColor = "#f9a825");
  audioBtn.addEventListener('mouseleave', () => audioBtn.style.backgroundColor = "#fbc02d");

</script>
</body>
</html>

